digraph LockerRoom {
  /**
   * Style
   *
   */

  graph [fontname = "DejaVuSansMono" fontsize = 9];
  node  [fontname = "DejaVuSansMono" fontsize = 9];
  edge  [fontname = "DejaVuSansMono" fontsize = 9];

  /**
   * Node
   *
   */

  node [ // object
    shape   = record
    rankdir = LR
  ]

  Team [
    label = "{locker_room_teams|\«LockerRoom::Team\»\lhas_many: users\lhas_many: mateships\lhas_many: ownerships\lhas_many: owners\l\n|{ \
      {FIELD|name\l|subdomain\l}| \
      {TYPE|varchar\l|varchar\l}| \
      {VALUE|\r|\r} \
    }}"
  ]

  User [
    label = "{locker_room_users|\«LockerRoom::User\»\lbelongs_to: team\lhas_one: mateship\l\n|{ \
      {FIELD|team_id\l|username\l|email\l|crypted_password\l|salt\l|remember_me_token\l|remember_me_token_expires_at\l|reset_password_token\l|reset_password_token_expires_at\l|activation_state\l|activation_token\l|activation_token_expires_at\l}| \
      {TYPE|integer\l|varchar\l|varchar\l|varchar\l|varchar\l|varchar\l|datetime\l|varchar\l|datetime\l|varchar\l|varchar\l|datetime\l}| \
      {VALUE|\r|\r|\r|\r|\r|\r|\r|\r|\r|\r|\r|\r} \
    }}"
  ]

  Mateship [
    label = "{locker_room_mateships|\«LockerRoom::Mateship\»\lbelongs_to: team\lbelongs_to: user\l\n|{ \
      {FIELD|team_id\l|user_id\l|role\l|name\l}| \
      {TYPE|integer\l|intger\l|integer\l|varchar\l}| \
      {VALUE|\r|\r|0:owner,1:mate\r|\r} \
    }}"
  ]

  edge [ // table
    shape   = record
    rankdir = LR
  ]


  /**
   * Relation
   *
   */

  edge [ // belongs_to -> has_many
    arrowhead = vee
    arrowtail = crow
    headlabel = ""
    taillabel = ""
    dir       = both
  ]

  Mateship -> Team
  User     -> Team

  edge [ // belongs_to -> has_one
    arrowhead = vee
    arrowtail = none
    headlabel = ""
    taillabel = ""
    dir       = both
  ]

  Mateship -> User

  edge [ // has_and_belongs_to_many
    arrowhead = crow
    arrowtail = vee
    headlabel = ""
    taillabel = ""
    dir       = both
  ]


  /**
   * Layout
   *
   */

  {rank=same; Mateship;};
  {rank=same; User;Team;};
}
